#!/usr/bin/env python3

# Copyright (C) 2015  The Software Heritage developers
# See the AUTHORS file at the top-level directory of this distribution
# License: GNU General Public License version 3, or any later version
# See top-level LICENSE file for more information

import argparse
import os

from swh.loader.tar import file


def parse_args():
    """Parse the configuration from the cli.

    """
    cli = argparse.ArgumentParser(
        description='Tarball listing tarballs size.')
    cli.add_argument('--mirror-root-dir', '-m', help='path to the root dir.')

    args = cli.parse_args()

    return args


if __name__ == '__main__':
    args = parse_args()
    root_dir = args.mirror_root_dir

    for tarpath, _ in file.archives_from(root_dir):
        print('%s %s' % (tarpath, os.path.getsize(tarpath)))
